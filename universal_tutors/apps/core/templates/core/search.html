{% extends "ui/layouts/base.html" %}

{% load fb_versions common_tags tutor_tags %}

{% block title %}Search{% endblock %}
{% block body_class %}app student{% endblock %}

{% block content %}
{% with class.tutor as tutor %}
{% with class.student as student %}

      <section class="blue feature-box"><div class="inner">
        <h1>Search <span>Find the perfect tutor for your next class.</span></h1>
      </div></section>
      
      <div class="hide-on-phones">
      {% include 'profile/fragments/_timer.html' %}
      </div>
      
      <section class="row clear">
        <div class="twelve columns">
          <div class="row">
            <form class="nice custom">
              <div class="four columns">
              
                <div class="row space">
                  <div class="three columns">
                    <label>Subject</label>
                  </div>
                  <div class="nine columns">
                    <select class="stretch">
                      <option>Option</option>
                    </select>
                  </div>
                </div>

                <div class="row space">
                  <div class="three columns">
                    <label>Price</label>
                  </div>
                  <div class="nine columns">
                    <select class="stretch">
                      <option>Option</option>
                    </select>
                  </div>
                </div>
                
              </div>
              
              <div class="four columns">
                
                <div class="row space">
                  <div class="three columns">
                    <label>System</label>
                  </div>
                  <div class="nine columns">
                    <select class="stretch">
                      <option>Option</option>
                    </select>
                  </div>
                </div>
                
                <div class="row">
                  <div class="three columns">
                    <label>Level</label>
                  </div>
                  <div class="nine columns">
                    <select class="stretch">
                      <option>Option</option>
                    </select>
                  </div>
                </div>

              </div>
              
              <div class="four columns">
              
                <div class="row space">
                  <div class="three columns">
                    <label>Day / Time</label>
                  </div>
                  <div class="nine columns">
                    <div class="row">
                      <div class="six columns">
                        <select class="stretch">
                          <option>Option</option>
                        </select>
                      </div>
                      <div class="six columns">
                        <select class="stretch">
                          <option>Option</option>
                        </select>
                      </div>
                    </div>
                  </div>
                </div>
                
                <div class="button"><input type="submit" class="icon search" value="Search"></div>
              </div>
              
            </form>
          </div>
        </div>
      </section>
      
      <hr class="big">
      
      <div class="row">
        <div class="twelve columns">
          
          <div class="right filter">
            <form>
              <select>
                <option>Sort by Price</option>
                <option>Sort by Rating</option>
                <option>Sort by Classes Given</option>
              </select>
            </form>
          </div>
        
          {% if query %}<h2>Tutors named 'John Doe'</h2>{% endif %}
        </div>
      </div>

      {% for tutor in tutors %}
      {% with tutor.profile as tutor_profile %}
      <article>
        <div class="row">
          <div class="one columns hide-on-phones">
            <img src="{% version tutor_profile.profile_image.path 'list_tutors' %}" alt="{{tutor.get_full_name}}">
          </div>
          
          <div class="three columns">
            <h3 class="title"><a href="{% url profile tutor.username %}">{{tutor.get_full_name}}</a></h3>
            <p><span class="credits">{% if tutor_profile.min_credits != tutor_profile.max_credits %}{{tutor_profile.min_credits}}-{{tutor_profile.max_credits}}{% else %}{{tutor_profile.max_credits}}{% endif %}</span></p>
          </div>
          
          <div class="four columns">
            <p>{{tutor_profile.about|truncatechars:300}}</br><a href="{% url profile tutor.username %}">Read More</a></p>
          </div>
          
		  <div class="two columns rating">
			{% get_stars tutor_profile.avg_rate %}
            <div class="reviews">
              <span class="hidden">Rating: {{tutor_profile.avg_rate}}.</span>
              <a href="{% url profile tutor.username %}">{{tutor_profile.no_reviews}} Review{{tutor_profile.no_reviews|pluralize}}</a>
            </div>
          </div>
          
          <div class="two columns action">
            <a href="javascript:;" class="send-message" data-reveal-id="modal-message" onclick="view_modal_messages({{tutor.id}});">Send a Message</a>
            <!-- a href="#" class="watch-video" data-reveal-id="modal-video">Watch Video</a-->
            <a href="{% url book_class tutor.username %}" class="book-class">Book a Class</a>
            <a href="javascript:;" class="favorite tutor-favorite-{{tutor.id}}" id-tutor="{{tutor.id}}">{% if tutor|is_favorite:user %}Remove favorite{% else %}Add favorite{% endif %}</a>
            <a href="{% url report tutor.username %}" class="report">Report</a>
          </div>
        </div>
      </article>
      {% endwith %}
      {% endfor %}

{% endwith %}
{% endwith %}
{% endblock %}
