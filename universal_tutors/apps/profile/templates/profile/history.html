{% extends "ui/layouts/base.html" %}

{% load fb_versions common_tags %}

{% block title %}Transaction History{% endblock %}
{% block body_class %}app{% endblock %}

{% block extra_css %}

{% endblock %}

{% block content %}
      <section class="blue feature-box"><div class="inner">
        <h1>Transaction History <span>You credits history.</span></h1>
      </div></section>
      
      <div class="hide-on-phones">
      {% include 'profile/fragments/_timer.html' %}
      </div>
      
      <div class="row">
        <div class="twelve columns">
        
          <a href="{% url profile %}" class="back">Back to Profile</a>
          <h2 class="clear">Transaction History</h2>
          
          <table class="stretch">
            <tr>
              <th>Date</th>
              <th>Time</th>
              <th>Type</th>
              <th>Credits</th>
              <th>Value</th>
              <th>Class</th>
              <th>{% if user_profile == user.profile.TUTOR %}Student{% else %}Tutor{% endif %}</th>
            </tr>
            {% for movement in person.movements.all %}
            {% with movement.related_class as class %}
            <tr>
              <td>{{movement.created|date:"D, d M Y"}}</td>
              <td>{{movement.created|time:"H:i"}}</td>
              <td>{{movement.get_type_display}}</td>
              <td>{{movement.credits}} credit{{movement.credits|pluralize}}</td>
              <td>{% if movement.value %}{{movement.value}}{% endif %}</td>
              <td>{% if class %}{{class}}{% endif %}</td>
              <td>{% if class %}{% if user_profile == user.profile.TUTOR %}{{class.student.get_full_name}}{% else %}{{class.tutor.get_full_name}}{% endif %}{% endif %}</td>
            </tr>
            {% endwith %}
            {% endfor %}
          </table>
        </div>
      </div>
{% endblock %}
