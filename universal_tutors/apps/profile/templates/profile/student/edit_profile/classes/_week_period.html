{% load common_tags tutor_tags %}

{% with period.tutor as tutor %}
<div id="schedule-week-period_{{period.id}}" class="slider-box" style="{{begin|get_class_period_calendar_size:period.duration}}">
	<div class="drop"><a id="schedule-week-period-open-link-{{period.id}}" href="javascript:;" class="drop-link">+</a></div>
</div>
<div id="schedule-week-period-dropbox-{{period.id}}" class="drop-box hidden">
	<div class="drop-box-menu-item">
		<a href="{% url class_detail period.id %}">{{period.subject}}</a> with <a href="{% url profile tutor.username %}">{{tutor.get_full_name}}</a>
	</div>
</div>
{% endwith %}
<script type="text/javascript">
	$('#schedule-week-period-dropbox-{{period.id}}').appendTo('#schedule-week-{{period.weekday}}-container');

	$('#schedule-week-period-open-link-{{period.id}}').click(function() {
		var el = $('#schedule-week-period_{{period.id}}');
		$('#schedule-week-period-dropbox-{{period.id}}').css({
			'left': el.position().left + el.outerWidth() - 70 +'px',
			'right': 'auto'
		});
		if($('#schedule-week-period-dropbox-{{period.id}}').hasClass('hidden')) {
			$('#schedule-week-period-dropbox-{{period.id}}').removeClass('hidden');
		} else {
			$('#schedule-week-period-dropbox-{{period.id}}').addClass('hidden');			
		};
	});	

	$('#schedule-week-period-open-link-{{period.id}}').mouseenter(function() {
		var el = $('#schedule-week-period_{{period.id}}');
		$('#schedule-week-period-dropbox-{{period.id}}').css({
			'left': el.position().left + el.outerWidth() - 70 +'px',
			'right': 'auto'
		});
		$('#schedule-week-period-dropbox-{{period.id}}').removeClass('hidden');
	});	
</script>

